{
    "openapi": "3.0.0",
    "info": {
        "title": "Generated by cue.",
        "version": "no version"
    },
    "paths": {},
    "components": {
        "schemas": {
            "apiVersion": {
                "type": "string"
            },
            "indicator": {
                "type": "object"
            },
            "kind": {
                "type": "string"
            },
            "metadata": {
                "type": "object",
                "required": [
                    "name"
                ],
                "properties": {
                    "name": {
                        "description": "TODO: fix regex - requires at least two chars",
                        "type": "string",
                        "pattern": "^[a-z0-9][a-z0-9_]{1,61}[a-z0-9]$"
                    },
                    "displayName": {
                        "description": "optional",
                        "type": "string"
                    },
                    "labels": {
                        "description": "map[string]string, optional",
                        "type": "object",
                        "additionalProperties": {
                            "type": "string"
                        }
                    }
                }
            },
            "spec": {
                "type": "object",
                "required": [
                    "service",
                    "timeWindow",
                    "budgetingMethod"
                ],
                "properties": {
                    "service": {
                        "description": "list?",
                        "type": "string"
                    },
                    "description": {
                        "description": "optional\nTODO: 1050 exceeds go regex limit (1000)",
                        "type": "string"
                    },
                    "timeWindow": {
                        "description": "object oneOf",
                        "type": "object",
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/timeWindowSecond"
                            },
                            {
                                "$ref": "#/components/schemas/timeWindowCalendar"
                            }
                        ]
                    },
                    "budgetingMethod": {
                        "description": "objectives:\nindicator:",
                        "type": "string",
                        "enum": [
                            "Occurrences",
                            "Timeslices"
                        ]
                    }
                }
            },
            "thresholdMetric": {
                "type": "object",
                "required": [
                    "source",
                    "queryType",
                    "query"
                ],
                "properties": {
                    "source": {
                        "type": "string"
                    },
                    "queryType": {
                        "type": "string"
                    },
                    "query": {
                        "type": "string"
                    }
                }
            },
            "timeWindow": {
                "type": "object",
                "required": [
                    "unit",
                    "count",
                    "isRolling"
                ],
                "properties": {
                    "unit": {
                        "type": "string"
                    },
                    "count": {
                        "type": "string"
                    },
                    "isRolling": {
                        "type": "boolean"
                    }
                }
            },
            "timeWindowCalendar": {
                "type": "object",
                "properties": {
                    "unit": {
                        "type": "string",
                        "enum": [
                            "Year",
                            "Quarter",
                            "Month",
                            "Week",
                            "Day"
                        ]
                    },
                    "count": {
                        "type": "string",
                        "enum": [
                            "numeric"
                        ]
                    },
                    "calendar": {
                        "type": "object",
                        "required": [
                            "startTime"
                        ],
                        "properties": {
                            "startTime": {
                                "description": "note: leap-seconds not supported",
                                "type": "string"
                            }
                        }
                    }
                },
                "allOf": [
                    {
                        "$ref": "#/components/schemas/timeWindow"
                    },
                    {
                        "required": [
                            "unit",
                            "count"
                        ]
                    },
                    {
                        "required": [
                            "calendar"
                        ]
                    }
                ]
            },
            "timeWindowSecond": {
                "type": "object",
                "properties": {
                    "unit": {
                        "type": "string",
                        "enum": [
                            "Second"
                        ]
                    },
                    "count": {
                        "type": "string",
                        "enum": [
                            "numeric"
                        ]
                    }
                },
                "allOf": [
                    {
                        "$ref": "#/components/schemas/timeWindow"
                    },
                    {
                        "required": [
                            "unit",
                            "count"
                        ]
                    }
                ]
            }
        }
    }
}
